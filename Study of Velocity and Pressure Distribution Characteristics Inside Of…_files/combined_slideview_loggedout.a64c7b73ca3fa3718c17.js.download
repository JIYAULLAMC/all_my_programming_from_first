/*! For license information please see combined_slideview_loggedout.a64c7b73ca3fa3718c17.js.LICENSE.txt */
!function(){var e={89835:function(e,t,o){"use strict";o(25840);var i=o(86544);$((function(){const e=window.slideshare_object,t=window.slideshare_object.utils;function o(e,t,o){var i={slideshow_id:e.id,slideshow_created_at:e.createdAt,slideshow_language:e.language,slideshow_format:e.format,source:o||window.location.pathname};amplitude.getInstance().logEvent(t,i)}function s(e,t,i){var s=e.data("download"),a=e.data("event-tracking-source");e.attr("disabled",!0),$.post(s,(function(s){var d,r,l;if(s.success&&s.url){(l=$("#j-downloading-alert")).show(),setTimeout((function(){l.hide()}),3e3),o(t,"slideshow_download_init",a);const e=document.createElement("iframe");e.src=s.url,e.style.display="none",document.body.appendChild(e)}else"error"==s.action?(d=s.error,(r=$("#alert-modal")).find("p").html(d),r.foundation("reveal","open")):"subscription_required"!=s.action||i||n(t);e.removeAttr("disabled")}))}function n(t,o=""){const s=e.slideshow&&t.id==e.slideshow.id?e.key:void 0;var n;$.cookie("logout_action","save",{path:"/",expires:(n=new Date,n.setTime(n.getTime()+12e4))}),(0,i.default)({from_source:`${t.url}?from_action=save${o}`,slideshow_id:t.id,slideshow_key:s,isDownload:!0})}function a(t){var o=e.slideshow;return o?{id:o.id,url:o.ss_url,createdAt:o.created_at,category:e.gam_cat_name,language:o.language,format:o.type,subscriptionRequired:o.subscription_required}:{id:$(t).attr("data-ssid"),url:$(t).attr("data-ss-url"),createdAt:$(t).attr("data-ss-created-at"),language:$(t).attr("data-ss-language"),format:$(t).attr("data-ss-format"),subscriptionRequired:"true"===$(t).attr("data-subscription-required")}}$("[data-download]").click((function(e){e.preventDefault(),e.stopPropagation();const i=$(this),d=a(i);o(d,"slideshow_download_attempt",$(i).data("event-tracking-source")),t.isUserAuthenticated()?s(i,d,!1):n(d)})),$((function(){$("[data-download-start-automatically]").each((function(){var e=a($(this));s($(this),e,!0)}))}))}))},38091:function(){!function(e){var t=".action-flag .flag",o="span.flagged",i="a.action-flag",s=".flag-inappropriate .action-submit",n="#flag-error-alert",a=".report-dropdown";function d(){$(o).addClass("hide"),$(t).removeClass("hide"),$(i).removeClass("hide"),$(a).removeClass("hide")}function r(){$(o).removeClass("hide"),$(t).addClass("hide"),$(i).click((function(e){e.preventDefault()})),$(i).removeClass("hide"),$(a).addClass("hide")}e.setup_flagging_interaction=function(){var t=!!this.flagging.flagged_value;$.extend(this.flagging,{postUpdate:function(){var t=$(".flag-inappropriate form select").val();$(s).prop("disabled",!0),$.post(e.flagging.update_url,{ia_value:t,slideshow_id:e.presentationId,source:"slideviewer"},(function(e){log("POST Success: "+e),$("#report-slideshow-modal").foundation("reveal","close"),$(n).addClass("hide"),$("#slideview-report-notice").removeClass("hide"),$(i).attr("disabled",!0),r(),$(window).scrollTop(0)})).fail((function(e){log(e),$(n).removeClass("hide")})).always((function(){$(s).prop("disabled",!1)}))}}),this.user.loggedin?t?r():($(i).attr("disabled",!1),$(s).click((function(t){t.stopPropagation(),t.preventDefault(),e.flagging.postUpdate()})),d()):d()}}(window.slideshare_object)},86544:function(e,t,o){"use strict";var i=o(20923);t.default=e=>{const t={from_source:e.from_source||"/",initial_view:e.initial_view||"join",slideshow_id:e.slideshow_id,slideshow_key:e.slideshow_key,device_id:"undefined"!=typeof amplitude&&amplitude.getInstance()&&amplitude.getInstance().options?amplitude.getInstance().options.deviceId:"",download:e.isDownload,content_gate:e.isContentGate},o=new FormData;for(let[e,i]of Object.entries(t))i&&o.append(e,i);(0,i.default)().then((e=>fetch("/scribd/authorize",{credentials:"same-origin",headers:{"X-CSRF-Token":e},method:"POST",body:o}).then((e=>e.json())).then((e=>{const t=document.createElement("form");t.setAttribute("action",e.url),t.setAttribute("method","POST");for(let[o,i]of Object.entries(e.params)){const e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name",o),e.value=i,t.appendChild(e)}document.body.appendChild(t),t.submit()}))))}},25840:function(){!function(e){function t(e){return a.raw?e:encodeURIComponent(e)}function o(e){return a.raw?e:decodeURIComponent(e)}function i(e){return t(a.json?JSON.stringify(e):String(e))}function s(t,o){var i=a.raw?t:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(n," ")),a.json?JSON.parse(e):e}catch(e){}}(t);return e.isFunction(o)?o(i):i}var n=/\+/g,a=e.cookie=function(n,d,r){if(void 0!==d&&!e.isFunction(d)){if("number"==typeof(r=e.extend({},a.defaults,r)).expires){var l=r.expires,c=r.expires=new Date;c.setTime(+c+864e5*l)}return document.cookie=[t(n),"=",i(d),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}for(var u=n?void 0:{},f=document.cookie?document.cookie.split("; "):[],p=0,w=f.length;w>p;p++){var h=f[p].split("="),m=o(h.shift()),v=h.join("=");if(n&&n===m){u=s(v,d);break}n||void 0===(v=s(v))||(u[m]=v)}return u};a.defaults={},e.removeCookie=function(t,o){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},o,{expires:-1})),!e.cookie(t))}}($)},20923:function(e,t){"use strict";t.default=async function(){const e=document.querySelector('meta[name="csrf-token"]');if(e)return e.getAttribute("content");if(null!==o)return o;let t=await fetch("/csrf_token",{credentials:"same-origin",method:"GET"});if(!t.ok)throw new Error(`csrf token http error: ${t.status}`);return t=await t.json(),o=t.csrf_token,o};let o=null}},t={};function o(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,o),n.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},("undefined"!=typeof window?window:void 0!==o.g?o.g:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"a2750f87d76421052e1df255e8002ca7ee560dbc"},function(){"use strict";var e=o(86544);function t(e){void 0!==e&&this.setup_slideview_contacts_interaction(e)}t.prototype.add_contact=function(e,t,o){$.ajax({url:"/contact/create",type:"POST",dataType:"json",data:{contactee:e},success:function(e){e.suspended?window.location.replace("/login"):e.follow_limit_reached?window.location.reload():t(e)},error:o})},t.prototype.delete_contact=function(e,t,o){$.ajax({url:"/contact/delete",type:"POST",dataType:"json",data:{contactee:e},success:function(e){e.success?t(e):o(e)},error:function(e){o(e)}})},t.prototype.setup_slideview_contacts_interaction=function(t){var o=!1,i=this;$(".j-follow").on("click",(function(s){var n=$(this),a=n.data("contactee-id");if(t.user.loggedin){s.preventDefault();var d=n.hasClass("following")?"unfollow":"follow";o||(n.addClass("loading"),n.find(".j-follow-progress").removeClass("hide"),function(e,t,s){o=!0;var n="authorthumbnail>"+e;window._gaq.push(["_trackEvent","bigfoot_slideview",n]);var a=function(e){t.removeClass("loading"),e.success?(t.toggleClass("following"),t.find(".j-follow-progress").addClass("hide"),window._gaq.push(["_trackEvent","bigfoot_slideview",n+"_failed"]),o=!1):d()},d=function(e){t.removeClass("loading"),window._gaq.push(["_trackEvent","bigfoot_slideview",n+"_failed"]),o=!1},r=$(".check-circle-icon");"follow"===e?(r.addClass("following"),i.add_contact(s,a,d)):"unfollow"===e&&(r.removeClass("following"),i.delete_contact(s,a,d))}(d,n,a))}else{s.preventDefault(),s.stopPropagation();var r={event:"follow",data:{contactee:a}};t.addAfterLoginEvent(r),(0,e.default)({from_source:window.location.pathname})}}))},window.SSContactsFollow=t;var i,s=t;o(38091),o(89835),i=!1,$(".slideshow-views-modal-trigger").on("click",(function(){!function(){if(!i){i=!0;var e={id:slideshare_object.slideshow.id};slideshare_object.analytics_api_enabled&&$.ajax({type:"GET",url:"/slideshow/stats",data:e,dataType:"json",success:function(e){var t=$(".j-info-embeds"),o=t.find(".j-embeds-container");if($(".j-slideshare-views").text(e.slideshow_analytics_on_ss),$(".j-embed-views").text(e.slideshow_analytics_views_from_embeds),e.slideshow_analytics_top_embeds.length>0){for(var i=0;i<e.slideshow_analytics_top_embeds.length;i++){var s=e.slideshow_analytics_top_embeds[i];o.append('<div class="small-8 columns stat-label">'+s.url+'</div><div class="small-4 columns stat-value text-right">'+s.hits+"</div>")}t.find(".j-no-embeds").remove(),o.show()}}})}}(),$("#slideshow-views-modal").removeClass("hidden"),$("#slideshow-views-modal .close").focus(),$("body").addClass("no_scroll")})),new s(slideshare_object),slideshare_object.setup_flagging_interaction(),slideshare_object.clippingTracker=new slideshare_object.ClippingTracker({userIsOwner:slideshare_object.user&&slideshare_object.user.loggedin}),$((function(){const t=window.slideshare_object,o=window.slideshare_object.utils;function i(e){const o=t.slideshow,i={slideshow_id:o.id,slideshow_created_at:o.created_at,slideshow_category:t.gam_cat_name,slideshow_language:o.language,slideshow_format:o.type,source:"slideshow_view"};amplitude.getInstance().logEvent(e,i)}function s(e){var t=$(".j-like-count");for(let n=0;n<t.length;n++){const a=$(t[n]);var i=parseInt(a.attr("data-favorites-count"),10)+e,s=a.attr("data-populate-favorites-count-only");a.attr("data-favorites-count",i),"true"===s?a.text(i):a.text(o.i18n("slideshow.foundation_slideview.likes_count",[{count:i}]))}}function n(){return{slideshow_id:t.presentationId,user_id:t.user.id,source:"slideviewer"}}function a(){$("#report-slideshow-modal").addClass("hidden"),$("body").removeClass("no_scroll")}function d(){$("#slideshow-likes-modal").addClass("hidden"),$("body").removeClass("no_scroll")}function r(){$("#slideshow-views-modal").addClass("hidden"),$("body").removeClass("no_scroll")}function l(e){"click"!==e.type&&"Enter"!==e.key||(null!=e.target?e.target:e.srcElement)&&($("#subscription-success-learn-more-modal").removeClass("hidden"),$("#subscription-success-learn-more-modal .close").focus(),$("body").addClass("no_scroll"))}function c(){$("#subscription-success-learn-more-modal").addClass("hidden"),$("body").removeClass("no_scroll"),$(".subscription-success-notification .learn-more-link").focus()}function u(e,t){const o=document.createElement(e);return o.setAttribute("class",t),o}function f(e,t){const o=document.createElement(e);for(let e in t)o.setAttribute(e,t[e]);return o}function p(e,t){e&&t.appendChild(document.createTextNode(e))}$(".j-like-button").on("click",(function(){const a=$(".j-like-button").attr("data-action");if(o.isUserAuthenticated())"like"===a?$.post(t.favorites.create_url,n()).then((function(){$(".j-like-button").addClass("liked").attr("data-action","unlike").children("i").removeClass("icon-heart").addClass("icon-heart-filled"),s(1),i("slideshow_liked")})):"unlike"===a&&$.post(t.favorites.delete_url,n()).then((function(){$(".j-like-button").removeClass("liked").attr("data-action","like").children("i").removeClass("icon-heart-filled").addClass("icon-heart"),s(-1),i("slideshow_unliked")}));else{var d={event:"like",data:{slideshow_id:t.slideshow.id}};t.addAfterLoginEvent(d),(0,e.default)({from_source:window.location.pathname,slideshow_id:t.slideshow.id})}})),$(".slideshow-likes-modal-trigger").on("click",(function(){$("#slideshow-likes-modal").removeClass("hidden"),$("#slideshow-likes-modal .close").focus(),$("body").addClass("no_scroll")})),$("#slideshow-likes-modal .close").on("click",d),$("#slideshow-likes-modal .mobile-back-button").on("click",d),$("#slideshow-likes-modal-backdrop").on("click",d),$("#slideshow-views-modal .close").on("click",r),$("#slideshow-views-modal .mobile-back-button").on("click",r),$("#slideshow-views-modal-backdrop").on("click",r),$(".report").on("click",(function(i){o.isUserAuthenticated()?($("#report-slideshow-modal").removeClass("hidden"),$("body").addClass("no_scroll")):(i.preventDefault(),i.stopPropagation(),null!==window.cookie("after_login_action")&&window.cookie("after_login_action","",{path:"/","max-age":-1}),(0,e.default)({from_source:window.location.pathname,slideshow_id:t.slideshow.id}))})),$("#report-slideshow-modal .close").on("click",a),$("#report-slideshow-modal-backdrop").on("click",a),$("#js-expand-description").on("click",(function(){$("#fade-slideshow-description").addClass("hidden"),$("#js-expand-description").addClass("hidden"),$(".slideshow-description-text-wrapper").removeClass("truncated")})),$(".j-more-favs").on("click",(function(){const{total:e,url:o}=t.activities.favorites;let i=o;const s=$("#favs-list"),n="offset="+$(".likes-row").length;i.indexOf("?")>=0?i+="&"+n:i+="?"+n,fetch(i,{method:"GET"}).then((e=>e.ok?e.json():e.json().then((e=>Promise.reject({status:e.status,message:"Please try again in sometime."}))))).then((t=>{const o=t.reduce(((e,t)=>{const o=u("div","likes-row"),i=f("a",{class:"author-photo-thumbnail",alt:"user thumbnail image",title:t.login,href:`/${t.login}?utm_campaign=profiletracking&utm_medium=sssite&utm_source=ssslideshow`}),s=f("img",{class:"lazy-thumb-img",alt:t.login,src:t.photo}),n=f("a",{class:"author-info",alt:"favoriter information",title:t.login,href:`/${t.login}?utm_campaign=profiletracking&utm_medium=sssite&utm_source=ssslideshow`}),a=u("div","username-time"),d=u("span","username");p(t.user_name,d);const r=u("span","liked-time");p(t.summary,r);const l=u("div","user-info"),c=u("span","favoriter-role");p(t.user_occupation,c);const w=u("span","favoriter-org");return w.appendChild(document.createTextNode(t.user_organization)),p(t.user_organization,w),i.appendChild(s),a.appendChild(d),a.appendChild(r),l.appendChild(c),l.appendChild(w),n.appendChild(a),n.appendChild(l),o.appendChild(i),o.appendChild(n),e.appendChild(o),e}),document.createDocumentFragment());s.append(o),$(".likes-row").length==e&&$(".more-container").hide()})).catch((e=>{throw new Error("Error fetching more favorites information")}))})),$(".subscription-success-notification .learn-more-link").on("click",l),$(".subscription-success-notification .learn-more-link").on("keydown",l),$("#subscription-success-learn-more-modal .close").on("click",c),$("#subscription-success-learn-more-modal-backdrop").on("click",c),$(".subscription-success-notification .close").on("click",(function(){$(".subscription-success-notification").addClass("hidden")}))})),window.addEventListener("DOMContentLoaded",(()=>{const e=$("#slideshow-description-text").html();e&&e.length>200&&($("#fade-slideshow-description").removeClass("hidden"),$("#js-expand-description").removeClass("hidden"),$(".slideshow-description-text-wrapper").addClass("truncated"))})),void 0===window._viewRestrictState&&(window._viewRestrictState={}),void 0===window._viewRestrictState.resolve&&(window._viewRestrictState.resolve=function(e){setTimeout((function(){window._viewRestrictState.resolve(e)}),0)}),void 0===window._viewRestrictState.promise&&(window._viewRestrictState.promise=new Promise(((e,t)=>window._viewRestrictState.resolve=e))),window._viewRestrictState.resolve,window._viewRestrictState.promise}()}();
//# sourceMappingURL=combined_slideview_loggedout.a64c7b73ca3fa3718c17.js.map