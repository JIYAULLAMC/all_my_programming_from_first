!function(){var e={38268:function(e,t,n){"use strict";n.r(t),n.d(t,{slides:function(){return i},slideContainer:function(){return o},slideImages:function(){return r},firstImage:function(){return s},currentImage:function(){return a},currentSlide:function(){return u},stage:function(){return l},progressBar:function(){return d},player:function(){return c},toolbar:function(){return f},getSlideSelectorByIndex:function(){return w},TOOLBAR_HEIGHT:function(){return _},SLIDE_MARGIN:function(){return m},NORMAL_IMAGE_WIDTH:function(){return h},FULLSCREEN_IMAGE_WIDTH:function(){return p}});const i=$("#new-player .slide"),o=$("#slide-container"),r=$("#new-player .slide-image"),s=r.first(),a=$("#new-player .slide.current .slide-image"),u=$("#new-player #current-slide"),l=$("#new-player #stage"),d=$("#progress-bar "),c=$("#new-player"),f=$("#player-toolbar"),w=e=>`#new-player #slide-${e}`,_=50,m=7,h=638,p=1024},4575:function(e,t,n){"use strict";n.r(t),n.d(t,{resolve:function(){return i}}),void 0===window._viewRestrictState&&(window._viewRestrictState={}),void 0===window._viewRestrictState.resolve&&(window._viewRestrictState.resolve=function(e){setTimeout((function(){window._viewRestrictState.resolve(e)}),0)}),void 0===window._viewRestrictState.promise&&(window._viewRestrictState.promise=new Promise(((e,t)=>window._viewRestrictState.resolve=e)));const i=window._viewRestrictState.resolve,o=window._viewRestrictState.promise;t.default=o},86544:function(e,t,n){"use strict";n.r(t);var i=n(20923);t.default=e=>{const t={from_source:e.from_source||"/",initial_view:e.initial_view||"join",slideshow_id:e.slideshow_id,slideshow_key:e.slideshow_key,device_id:"undefined"!=typeof amplitude&&amplitude.getInstance()&&amplitude.getInstance().options?amplitude.getInstance().options.deviceId:"",download:e.isDownload,content_gate:e.isContentGate},n=new FormData;for(let[e,i]of Object.entries(t))i&&n.append(e,i);(0,i.default)().then((e=>fetch("/scribd/authorize",{credentials:"same-origin",headers:{"X-CSRF-Token":e},method:"POST",body:n}).then((e=>e.json())).then((e=>{const t=document.createElement("form");t.setAttribute("action",e.url),t.setAttribute("method","POST");for(let[n,i]of Object.entries(e.params)){const e=document.createElement("input");e.setAttribute("type","hidden"),e.setAttribute("name",n),e.value=i,t.appendChild(e)}document.body.appendChild(t),t.submit()}))))}},95318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},89994:function(e,t,n){"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.logViewRestrictionEvent=t.hideLimitOverlay=t.handleBannerNotification=t.getShouldShowReaderBlur=t.getShouldShowBannerNotificationsUX=t.CONTENT_COUNT_TO_START_RENDERING_BANNER_NOTIFICATIONS=t.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION=void 0,t.shouldMakeAnAssignment=function(e){return e>=3},t.showLimitOverlay=void 0;var o=i(n(86544)),r=n(38268);t.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION=5,t.CONTENT_COUNT_TO_START_RENDERING_BANNER_NOTIFICATIONS=2,t.getShouldShowBannerNotificationsUX=(e,t,n)=>({shouldShowBanner:e-t<=n,remainingDocCount:e-t}),t.getShouldShowReaderBlur=(e,t)=>t>e;const s=e=>{const t=window.slideshare_object.slideshow,n={slideshow_id:t.id,slideshow_created_at:t.created_at,slideshow_category:window.slideshare_object.gam_cat_name,slideshow_language:t.language,slideshow_format:t.type};"undefined"!=typeof amplitude&&amplitude.getInstance().logEvent(e,n)};t.logViewRestrictionEvent=e=>{const t=5===e;3===e?s("view_restriction_banner_shown"):t&&s("view_restriction_threshold_hit")};const a=()=>{const e=window.slideshare_object,t=e&&e.slideshow;(0,o.default)({from_source:`${t.ss_url}?subscription_success_banner=show`,slideshow_id:t.id,isContentGate:!0})};t.handleBannerNotification=(e,t,n)=>{if(e){const e=$(".limit-notification"),i=e.find("#notification-warning-text");return i.empty(),i.append(((e,t)=>{const n=t.utils;return e<0?n.i18n("slideshow.foundation_slideview.limit_content_without_account.notification_banner_ran_out_text"):0===e?n.i18n("slideshow.foundation_slideview.limit_content_without_account.notification_banner_last_document_text"):n.i18n("slideshow.foundation_slideview.limit_content_without_accoun.notification_banner_text",{count:e})})(t,n)),e.find("#notification-warning-link").on("click",a),void e.css("opacity",0).slideDown(400).animate({opacity:1},{queue:!1,duration:400})}},t.showLimitOverlay=()=>{const e=$(".limit-overlay");e.find("#sign-up-with-scribd").on("click",a),e.css("display",""),r.player.addClass("guest-limit")},t.hideLimitOverlay=()=>{$(".limit-overlay").css("display","none"),r.player.removeClass("guest-limit")}},66142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIsValidIsoDate=t.default=void 0;var i=n(63911);const o="contentGate";t.default=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.storage=e||new a}trackView(e,t){this.withState((n=>{Number.isInteger(n.testVersion)&&n.testVersion!=t&&(n.testVersion=t,n.documents=[]),!Number.isInteger(n.testVersion)&&Number.isInteger(t)&&(n.testVersion=t),Array.isArray(n.documents)||(n.documents=[]);const i=new Date(this.storage.now().getTime()-2592e6).toISOString();n.documents=n.documents.filter(s).filter((e=>e.at>i)).filter((t=>`${t.id}`!=`${e}`)),n.documents.push({id:e,at:this.storage.now()}),this.documents=n.documents}))}get numberOfViewedDocuments(){if(!Array.isArray(this.documents))throw new Error("getting number of viewed documents before adding one");return this.documents.length}withState(e){let t=this.storage.load(o);e(t||{}),this.storage.save(o,t)}};const r=e=>!!/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/.test(e)&&new Date(e).toISOString()===e;function s(e){return!!(n=e.id)&&"string"==typeof n&&!!(t=e.at)&&r(t);var t,n}t.getIsValidIsoDate=r;class a{now(){return new Date}load(e){return(0,i.isLocalStorageEnabled)()?JSON.parse(window.localStorage.getItem(e)||"{}"):null}save(e,t){if(!(0,i.isLocalStorageEnabled)())return null;window.localStorage.setItem(e,JSON.stringify(t))}remove(e){(0,i.isLocalStorageEnabled)()&&window.localStorage.removeItem(e)}}},15130:function(e,t){"use strict";function n(e){if(!window.ab_tests)return null;const t=`${e}:`;return Object.keys(window.ab_tests).find((n=>n==e||n.startsWith(t)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=n(e);return t?window.ab_tests[t]:null},t.getVersion=function(e){const t=n(e);return t?0|t.split(":")[1]:null}},28041:function(e,t,n){"use strict";var i=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=(0,r.default)(a),n=(0,r.getVersion)(a);if(t)return[t,n];if(!e)return[null];const i=await(0,o.default)(),s=await fetch("/ab_tests/view_restriction",{method:"POST",credentials:"same-origin",headers:{"X-CSRF-Token":i}});if(s.ok){const e=await s.json();return e.amplitude_name&&u(e.amplitude_name,e.value),[e.value,0|e.amplitude_name.split(":")[1]]}throw new Error("failed to get an assignment")};var o=i(n(20923)),r=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var a=o?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=e[r]}return i.default=e,n&&n.set(e,i),i}(n(15130));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}const a="view_restriction_without_subscription_after_five";function u(e,t){if("undefined"!=typeof amplitude){const n=new amplitude.Identify;n.set(e,t),amplitude.getInstance().identify(n)}}},20923:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function(){const e=document.querySelector('meta[name="csrf-token"]');if(e)return e.getAttribute("content");if(null!==n)return n;let t=await fetch("/csrf_token",{credentials:"same-origin",method:"GET"});if(!t.ok)throw new Error(`csrf token http error: ${t.status}`);return t=await t.json(),n=t.csrf_token,n};let n=null},63911:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLocalStorageEnabled=void 0;let n=null;t.isLocalStorageEnabled=()=>{if(null!==n)return n;try{return window.localStorage.setItem("slideshare_test","test"),window.localStorage.removeItem("slideshare_test"),n=!0,n}catch(e){return n=!1,n}}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"a2750f87d76421052e1df255e8002ca7ee560dbc"},function(){"use strict";var e=n(95318),t=n(89994),i=n(4575),o=e(n(66142)),r=n(38268),s=e(n(28041)),a=n(63911);function u(e,n){if("test"!==e)return;const i=window.slideshare_object,{shouldShowBanner:o,remainingDocCount:s}=(0,t.getShouldShowBannerNotificationsUX)(t.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION,n,t.CONTENT_COUNT_TO_START_RENDERING_BANNER_NOTIFICATIONS),a=(0,t.getShouldShowReaderBlur)(t.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION,n);(0,t.handleBannerNotification)(o,s,i),a&&r.player.attr("data-shouldblurreader",a)}function l(e){const n=t.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION-t.CONTENT_COUNT_TO_START_RENDERING_BANNER_NOTIFICATIONS;return e<n?"unrestricted":e>=n&&e<t.ALLOWED_CONTENT_COUNT_WITHOUT_SUBSCRIPTION?"warning":"restricted"}window.addEventListener("DOMContentLoaded",(()=>{if(!window.feature_flags.viewRestrictionWithoutSubscriptionAfterFive)return void(0,i.resolve)({state:null,counter:null});const e=window.slideshare_object,n=e&&e.slideshow;n?(0,a.isLocalStorageEnabled)()?n.view_restriction_eligible?(0,s.default)().then((e=>{let[r,a]=e,d=new o.default;d.trackView(n.id,a),(0,t.logViewRestrictionEvent)(d.numberOfViewedDocuments),(0,i.resolve)({state:l(d.numberOfViewedDocuments),counter:d.numberOfViewedDocuments});const c=d.numberOfViewedDocuments;(0,t.shouldMakeAnAssignment)(c)&&(0,s.default)(!0).then((e=>{let[t,i]=e;u(t,c),a!=i&&d.trackView(n.id,i)})),u(r,c)})):(0,i.resolve)({state:"unrestricted",counter:null}):(0,i.resolve)({state:"not supported",counter:null}):(0,i.resolve)({state:null,counter:null})}))}()}();
//# sourceMappingURL=content-gate.513f30b3122d41e57cf7.js.map